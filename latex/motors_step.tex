\subsection{Silnik krokowy}

Silniki krokowe są maszynami elektrycznymi bez komutatorowymi. Zazwyczaj wszystkie uzwojenia silnika są częścią stojana, podczas gdy rotor jest magnesem trwałym lub w przypadku silników VRM ({\em Variable Reluctance Motor}) zębatym blokiem z materiału magnetycznie miękkiego (patrz sekcja \ref{subsec:materialy_fer}). Komutacja (czyli zmiana kierunku/ uzwojenia w którym następuje przepływ prądu elektrycznego) musi być wymuszona poprzez zewnętrzne urządzenie sterujące maszyną. Takie sterowniki są zazwyczaj projektowane w taki sposób, aby zapewnić możliwość utrzymania wirnika w niemal dowolnej pozycji kątowej, oraz obracać nim w obu kierunkach. 

\subsubsection{Rodzaje silników krokowych}

Silniki krokowe ze względu na konstrukcję można podzielić na trzy główne grupy: 
\begin{easylist}
	& silniki o zmiennej reluktancji,
	& z magnesem trwałym,
	& hybrydowe.
\end{easylist}

\insertImg{grafiki/reluctance_moment.png}
		{Powstawanie reluktancyjnego momentu obrotowego.}
		{przepiorkowski}

Reluktancja jest parametrem analogicznym do rezystancji elektrycznej, lecz odniesionym do strumienia magnetycznego. Jest to inaczej ,,rezystancja magnetyczna''.

Obrócenie ruchomego elementu o kąt $ \alpha $ spowoduje że będzie on próbował powrócić do położenia $ \alpha = 0 $, w którym reluktancja obwodu jest najmniejsza. W silnikach VRM przepływ prądu stałego przez uzwojenia powoduje, że zęby wirnika ustawiają się naprzeciw zasilanego uzwojenia.

\insertImg{grafiki/vrm_przekroj.png}
		{Silnik o zmiennej reluktancji (VRM)- Przekrój.}
		{przepiorkowski}

W odróżnieniu od VRM, wirnik silnika krokowego PM ({\em Permanent Magnet}- Magnes trwały) nie posiada zębów. Jest wykonany w postaci walca naprzemiennie namagnesowanego biegunami N i S. Specyficzny rodzaj zębów ma rdzeń stojana. \newline
W zależności od kierunku przepływu prądu w uzwojeniu przyciągane są odpowiednie bieguny wirnika (resunek \ref{grafiki/pm_stepper.png}).

\insertImg{grafiki/pm_stepper.png}
		{Zasada działania silnika PM.}
		{ni}
		
Główną zaletą silnika krokowego PM jest zastosowanie magnesów trwałych w stojanie, dzięki czemu nie ma potrzeby stosowanie szczotek (jak w silnikach DC) oraz jego niska cena. Wadą tego typu maszyny jest relatywnie niski moment obrotowy i brak możliwości rozwijania dużych prędkości obrotowych. \\

Silnik hybrydowy łączy w sobie cechy obu rozwiązań, dzięki czemu zostały poprawione takie parametry jak:
\begin{easylist}
	& moment obrotowy, 
	& maksymalna prędkość obrotowa, 
	& rozdzielczość kroku.
	\\
\end{easylist}

Niestety silniki hybrydowe są około 2-3 razy droższe od silników PM. Wirnik silnika HB ({\em Hybrid Motor}) jest zbudowany z uzębionych nabiegunników i magnesu trwałego, powodującego naprzemienne magnesowanie zębów biegunami N i S. Uzębiony stojan konstrukcją przypomina ten z silnika VRM. 

\insertImgSetSize{grafiki/stepper_budowa.png}
		{70}
		{Konstrukcja dwufazowego silnika krokowego hybrydowego.}
		{enggarage}
		
W silniku HB wirujące pole stojana obraca wirnik z jednego położenia do drugiego na zasadzie jak w silniku VRM. Jest to możliwe dzięki przesunięciu ,,północnej'' i ,,południowej'' części wirnika o pół ząbka. Silniki HB dzięki poprawionym parametrom są obecnie najbardziej popularnymi silnikami krokowymi, pomimo niskiej ceny silników PM.
		
\insertImgSetSize{grafiki/stepper_rotor.png}
		{70}
		{Budowa wirnika silnika krokowego hybrydowego dwufazowego.}
		{edw_sierpien_2002}

\subsubsection{Sterowanie}
\label{sss:sterowanie_krokowy}

W pierwszej kolejności należy rozróżnić sposób zasilania silnika krokowego, który może być unipolarny lub bipolarny (rys. \ref{grafiki/stepper_zasilanie_uni_bi.png}).

\insertImg{grafiki/stepper_zasilanie_uni_bi.png}
		{Sposób sterowania (zasilania) silnika krokowego dwufazowego- z lewej unipolarnie, z prawej bipolarnie.}
		{hackaday}

Przy zasilaniu unipolarnym, dla pojedynczego uzwojenia na zewnątrz silnika wyprowadzone są trzy przewody- Oba końce cewki i odczep w połowie jej długości. Podłączając do odczepu ,,+'' zasilania można sterować połówkami uzwojeń zwierając w odpowiedniej kolejności i na odpowiedni czas końcówki do masy. W zasilaniu bipolarnym, prąd płynie zawsze przez całe uzwojenie (z silnika wyprowadzone są tylko dwa przewody na cewkę). Zaletą wariantu unipolarnego jest możliwość znacznego uproszczenia układu sterowania. Poważną wadą natomiast jest to, że prąd podawany jest zawsze tylko na połowę danego uzwojenia, co ma negatywne przełożenie na moment obrotowy. 

\insertImg{grafiki/stepper_simple.png}
		{Uproszczony model silnika krokowego dwufazowego o kroku 90\degree.}
		{howtomecha}

Oddzielną sprawą jest sposób/ sekwencja podawania impulsów prądowych do uzwojeń silnika. Sterowanie pod tym względem dzieli się na:

\begin{easylist}
	& Falowe, 
	& Pełnokrokowe, 
	& Półkrokowe,
	& Mikrokrokowe.
	\\
\end{easylist}

Do pomocy w wyjaśnieniu poszczególnych typów sterowania posłuży rysunek \ref{grafiki/stepper_simple.png}, prezentujący uproszczony silnik krokowy. Maszyna składa się z wirnika zbudowanego jak na rys. \ref{grafiki/stepper_rotor.png} tyle że z ilością zębów (na wirniku i stojanie) pozwalającą osiągnąć pełen obrót w czterech pełnych komutacjach. Silnik posiada 2 uzwojenia A i B nawinięte w taki sposób, że pary A/A' i B/B' są ze sobą połączone (uzwojenie podzielone na dwie sekcje). Przykładając napięcie do cewki A, w zależności od polaryzacji tego napięcia, prąd będzie wpływał przez uzwojenie A i wypływał z uzwojenia A' lub na odwrót. Tak samo ma się sytuacja w przypadku cewki B.

\tocLessLeftNorm{Sterowanie falowe}

W przypadku braku zasilania, wirnik silnika ustawi się w jednej z czterech spoczynkowych pozycji (0\degree, 90\degree, 180\degree lub 270\degree). Dzieje się tak dlatego, że namagnesowany wirnik usiłuje zająć taką pozycję, aby reluktancja obwodu magnetycznego była jak najmniejsza, tzn. aby namagnesowane zęby wirnika były ustawione w jednej linii z dowolną parą zębów stojana. Znikomy moment obrotowy powodujący takie pozycjonowanie to inaczej moment bezprądowy (spoczynkowy). 

\insertImgSetSize{grafiki/stepper_sterowanie_falowe.eps}
		{100}
		{Sekwencja zasilania uzwojeń przy sterowaniu falowym (obrót wirnika z rys. \ref{grafiki/stepper_simple.png} według wskazówek zegara).}
		{oprWlasne}

Rysunek \ref{grafiki/stepper_sterowanie_falowe.eps} prezentuje sekwencję dzięki której wirnik obróci się o trzy pełne obroty w prawo przy zastosowaniu sterowania falowego. Na osi odciętych znajdują się kolejne chwile w czasie, a na osi rzędnych wartość potencjału przyłożonego do danego zacisku (wartości 1 i 0 prezentujące stan wysoki lub niski potencjału). Aby wirnik obracał się w przeciwnym kierunku, sekwencję należy odtworzyć w odwrotnej kolejności. Jak widać na przebiegach, w danym momencie w czasie prąd znajduje się zawsze tylko w jednym z uzwojeń, co nie umożliwia uzyskania maksymalnego dla danej maszyny momentu obrotowego. Pomimo że sterowanie falowe nie zapewnia uzyskania optymalnego momentu obrotowego, to przy zastosowaniu w niektórych aplikacjach jest wystarczające, a ponadto jest jest najprostsze do zaimplementowania.

\clearpage

\tocLessLeftNorm{Sterowanie pełnokrokowe}

W trybie sterowania pełnokrokowego prąd płynie przez oba uzwojenia jednocześnie. Nie ma to wpływu na prędkość obrotową wirnika, ale ma znaczący wpływ na moment obrotowy, który jest dwa razy większy niż w trybie falowym. Pełny obrót wirnika dalej jest osiągany w czterech "ruchach", ale absolutna pozycja kątowa w każdym z nich jest względem trybu falowego przesunięta o 45\degree.

\insertImgSetSize{grafiki/stepper_sterowanie_krokowe.eps}
		{100}
		{Sekwencja zasilania uzwojeń przy sterowaniu pełnokrokowym (obrót wirnika z rys. \ref{grafiki/stepper_simple.png} według wskazówek zegara).}
		{oprWlasne}
		
Rysunek \ref{grafiki/stepper_sterowanie_krokowe.eps} przedstawia przebiegi dla 3 obrotów, przy sterowaniu pełnokrokowym. Kolejne pozycje wirnika są następujące: 45\degree w pierwszym interwale czasowym, 135\degree w drugim, 225\degree w kolejnym i 315\degree w ostatnim (dla danego obrotu). Potem cykl się powtarza. Tryb pełnokrokowy pozwala osiągnąć optymalny dla danego silnika moment obrotowy, ale niestety rozdzielczość obrotu jest ograniczona do ilości kroków na obrót danego modelu maszyny. Typowe wartości kroków na obrót w silnikach krokowych hybrydowych to 100 (krok o rozdzielczości 3.6\degree), 200 (1.8\degree) i 400 (0.9\degree). Aby uzyskać większą rozdzielczość kroku, należy zastosować sterowanie półkrokowe lub mikrokrokowe.

\clearpage

\tocLessLeftNorm{Sterowanie półkrokowe}

Tryb półkrokowy jest połączeniem sterowania falowego i pełnokrokowego. Rozdzielczość obrotowa względem poprzednich trybów jest dwa razy większa, dlatego że uzwojenia naprzemiennie zasilane są pojedynczo/ oba jednocześnie.

\insertImgSetSize{grafiki/stepper_sterowanie_polkrokowe.eps}
		{100}
		{Sekwencja zasilania uzwojeń przy sterowaniu półkrokowym (obrót wirnika z rys. \ref{grafiki/stepper_simple.png} według wskazówek zegara).}
		{oprWlasne}
		
Wadą takiego rozwiązania jest mniejszy moment obrotowy. Może to spowodować szarpanie wirnika przy dużych prędkościach obrotowych. Przy niskich prędkościach i obciążeniach natomiast, efekt ten rzadko występuje i można uzyskać polepszoną płynność ruchu, w porównaniu do poprzednich trybów. Aby uniknąć efektu zmiennego momentu, można zastosować sterowanie półkrokowe ze zmiennym prądem (rys. \ref{grafiki/stepper_sterowanie_polkrokowe_zmienne.eps}). Na rysunku widać że w momentach kiedy różnica potencjałów występuje tylko na jednym z uzwojeń, jest ona dwa razy większa niż w przypadku kiedy zasilane są obie cewki. Prąd płynący w uzwojeniach jest proporcjonalny do przyłożonego do nich napięcia, dlatego moment się wyrównuje i silnik nie jest narażony na szarpanie. Rozwiązanie te także nie pozostaje bez wad- Zakładając że dla momentu w czasie, w którym przez oba uzwojenia płynie prąd, wartość tego prądu jest maksymalna (nominalna) dla danego modelu silnika w każdym z uzwojeń, oznacza to że w chwilach kiedy kiedy napięcie jest podawane na tylko jedno uzwojenie, prąd w nim płynący jest większy od nominalnego (tak jak na rys. \ref{grafiki/stepper_sterowanie_polkrokowe_zmienne.eps}). To naraża silnik na nadmierne grzanie, a nawet na uszkodzenie. Z drugiej strony można założyć że nominalny prąd ma płynąć w momencie zasilania jednego uzwojenia, a mniejszy przy zasilaniu dwóch. Ten tryb jest bezpieczny, ale optymalny moment obrotowy nie jest uzyskiwany.

\insertImgSetSize{grafiki/stepper_sterowanie_polkrokowe_zmienne.eps}
		{100}
		{Sekwencja zasilania uzwojeń przy sterowaniu półkrokowym ze zmiennym prądem (obrót wirnika z rys. \ref{grafiki/stepper_simple.png} według wskazówek zegara).}
		{oprWlasne}
		
\tocLessLeftNorm{Sterowanie mikrokrokowe}

Największą rozdzielczość ruchu (teoretycznie nieograniczoną, a praktycznie ograniczoną możliwościami układu sterującego) można uzyskać przy zastosowaniu trybu mikrokrokowego. Aby obrócić wirnik z rys. \ref{grafiki/stepper_simple.png} w najpłynniejszy możliwy sposób, kształt prądu podawany na uzwojenia powinien być naturalny dla danej konstrukcji silnika, czy też dla ruchu który wykonuje element ruchomy- W tym wypadku jest to ruch obrotowy. 

\begin{equation} \label{eq:stepper2}
	\sin^2\theta + \cos^2\theta = 1
\end{equation}

Równanie \ref{eq:stepper2} prezentuje wzór na jedynkę trygonometryczną. Można go użyć, aby uzyskać dowolną pozycję wirnika pomiędzy kolejnymi naturalnymi ułożeniami wirnika. W tym momencie należy rozróżnić dwa rodzaje pozycji kątowych wirnika silnika krokowego- magnetyczną oraz fizyczną. W przypadku silnika z rys. \ref{grafiki/stepper_simple.png} obie pozycje będą się zawsze pokrywać, ze względu na to że potrzeba jedynie czterech pełnych kroków aby uzyskać pełen obrót- kąt ,,magnetyczny'' 45\degree odpowiada obrotowi wirnika o 45\degree. Dla rzeczywistej sytuacji, w której silnik posiada np. 200 kroków na obrót, jeden stopień magnetyczny odpowiadałby już jedynie $ \frac{1}{50} $ stopnia w obrocie. Innymi słowy potrzeba 50 obrotów magnetycznych na 1 obrót fizyczny wirnika.

\insertImg{grafiki/circle_sine.eps}
		{Ćwiartki okręgu i funkcji $ \sin x $ w kartezjańskim układzie współrzędnych}
		{wikimedia}
		
Tak więc, podając na uzwojenia silnika prąd o kształcie funkcji {\it sinus} (na pierwsze uzwojenie) i {\it cosinus} (na drugie) sumaryczny prąd w uzwojeniach teoretycznie powinien być stały (wzór \ref{eq:stepper2}), a co za tym idzie stały powinien być także moment obrotowy.

\insertImgSetSize{grafiki/stepper_sin_cos.eps}
		{85}
		{Kształt prądów podawanych na uzwojenia A i B w celu uzyskania optymalnej płynności obrotu w silniku krokowym hybrydowym dwufazowym.}
		{oprWlasne}
		
Prezentowane przebiegi z rys. \ref{grafiki/stepper_sin_cos.eps} obrócą wał silnika o 360\degree magnetycznych. Maksymalna amplituda po znormalizowaniu reprezentuje wartość natężenia nominalnego prądu dla danego modelu silnika. Zazwyczaj silniki krokowe są sterowane z przekształtników, które same są zasilane napięciem stałym. Rozdzielczości uzyskiwane w typowych sterownikach wynoszą od 8 do 32 mikrokroków na pełen krok.  \\

\insertImgSetSize{grafiki/stepper_sin_cos_8.eps}
		{85}
		{Kształt prądów podawanych na uzwojenia A i B przy sterowaniu mikrokrokowym z rozdzielczością $ \frac{1}{8} $ kroku.}
		{oprWlasne}
		
Tabela \ref{tab:stepper_sterowanie} prezentuje podsumowanie omówionych trybów sterowania silnikami krokowymi dla zasilania bipolarnego i unipolarnego.

\insertTab{|c|c|c|c|c|c|c|c|c|}
{%
\hline
\makecell{Rodzaj\\sterowania} & \multicolumn{2}{|c|}{Falowe} & \multicolumn{2}{|c|}{Pełnokrokowe} & \multicolumn{2}{|c|}{Półkrokowe} & \multicolumn{2}{|c|}{Mikrokrokowe} \\ 
\cline{2-9} & Bi & Uni & Bi & Uni & Bi & Uni & Bi & Uni \\ \hline
\makecell{Moment\\obrotowy} & 50\% & 25\% & 100\% & 50\% & \makecell{50-\\100}\% & \makecell{25-\\50}\% & 50\% & 25\% \\ \hline
\makecell{Komplikacja\\sterownika} & średnia & mała & średnia & mała & duża & duża & duża & duża \\ \hline
\makecell{Płynność\\ruchu} & mała & mała & mała & mała & duża & duża & duża & duża \\ \hline
\makecell{Rozdzielczość\\kroku} & mała & mała & mała & mała & średnia & średnia & duża & duża \\ \hline
}
{Cechy poszczególnych trybów sterowania silnikiem krokowym}
{przepiorkowski}
{tab:stepper_sterowanie}

\subsubsection{Zalety i wady silników krokowych}

Możliwość sterowania silnikiem krokowym za pomocą impulsów jest dużą zaletą- Przy odpowiednio dobranym układzie napędowym, do pracy w ograniczonym obszarze dokładności silnik krokowy nie potrzebuje żadnego sprzężenia zwrotnego (praca w otwartej pętli sprzężenia zwrotnego). Teoretycznie pozycja wirnika jest znana po każdej komutacji wykonanej przez układ sterujący. Niestety, wirnik i jego obciążenie posiadają pewną bezwładność co sprawia że przed osiągnięciem ustalonej pozycji występują drgania.

\insertImgSetSize{grafiki/stepper_drgania.png}
		{60}
		{Wykres czasowy ilusytujący położenie wirnika podczas wykonywania skoku}
		{edw_sierpien_2002}
		
W przypadkach kiedy wymagana jest duża precyzja sterowania, tak duże drgania są bardzo niekorzystne. Wybrane sposoby eliminacji tych problemów to:

\begin{easylist}
	& Tłumienie mechaniczne poprzez zwiększenie momentu tarcia.
	& Sprzęgła elastyczne i przekładnie paskowe zastosowane w układzie napędowym, w celu redukcji przenoszonych drgań do obciążenia.
	& Wybór pracy półkrokowej lub mikrokrokowej- Im bardziej przebieg prądu jest zbliżony do sinusoidalnego, tym ciszej i stabilniej pracuje silnik krokowy.
	& Zastosowanie silnika krokowego o mniejszym skoku.
	\\
\end{easylist} 

Należy pamiętać o wielkości i częstotliwości oscylacji decyduje głównie masa wirnika oraz wielkość i rodzaj obciążenia.


\clearpage

